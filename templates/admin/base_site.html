{% extends "admin/base.html" %}
{% load static %}
{% block header %}
    <!-- 引入 Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
    <!-- 引入自定义 CSS -->
    <link rel="stylesheet" href="{% static 'css/Source%20Sans%20Pro.css' %}">
    <link rel="stylesheet" href="{% static 'fonts/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'fonts/simple-line-icons.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<div class="bg-container">
    <div class="container text-center text-white">
        <!-- 可以根据需要取消下面的注释来显示标题 -->
        <!-- <h1 class="display-4 fw-bold bg-title">Review Home</h1> -->
    </div>
</div>

<style>
/* 背景容器样式 */
.bg-container {
    background-image: url('{% static "img/banner-callout.jpg" %}');
    background-size: cover;
    background-position: center;
    height: auto;
    aspect-ratio: 2560 / 80;
    width: 100%;
    position: relative;
}

/* 标题样式 */
.bg-title {
    margin-top: 0;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
    font-size: clamp(1.5rem, 5vw, 3rem);
    line-height: 1.2;
}
</style>

<a class="menu-toggle rounded" href="#"><i class="fa fa-bars"></i></a>
<nav class="navbar navbar-expand navbar-light" id="sidebar-wrapper">
    <div class="container">
        <button data-bs-toggle="collapse" class="navbar-toggler d-none" data-bs-target="#sidebar-nav"></button>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav sidebar-nav" id="sidebar-nav">
                <li class="nav-item sidebar-brand">
                    <a class="nav-link active js-scroll-trigger" href="{% url 'home' %}">Ebbinghaus Anywhere</a>
                </li>
                
                {% if user.is_authenticated %}
                <!-- 用户已登录时的导航 -->
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="{% url 'item-list' %}">All Items</a>
                </li>
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="{% url 'review-home' %}">Review</a>
                </li>
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="{% url 'input-view' %}">Input</a>
                </li>
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="{% url 'search' %}">Search</a>
                </li>
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="{% url 'user_profile' %}">Manage Profile</a>
                </li>
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="{% url 'admin:index' %}">Manage Data</a>
                </li>
                <li class="nav-item sidebar-nav-item">
                    <a href="#" class="nav-link js-scroll-trigger" id="logout-link">Log out</a>
                </li>
                <script>
                    document.getElementById('logout-link').addEventListener('click', function(e) {
                        e.preventDefault();  // 防止页面跳转
                
                        // 创建一个隐藏的表单，用于发起 POST 请求
                        var form = document.createElement('form');
                        form.method = 'POST';
                        form.action = '{% url "logout" %}';  // 填写登出URL
                
                        // 创建一个隐藏的 csrf_token 输入框
                        var csrfToken = document.createElement('input');
                        csrfToken.type = 'hidden';
                        csrfToken.name = 'csrfmiddlewaretoken';
                        csrfToken.value = '{{ csrf_token }}';
                        form.appendChild(csrfToken);
                
                        // 将表单添加到页面中并提交
                        document.body.appendChild(form);
                        form.submit();
                    });
                </script>
                {% else %}
                <!-- 用户未登录时的导航 -->
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="{% url 'login' %}">Log in</a>
                </li>
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="{% url 'register' %}">Sign up!</a>
                </li>
                {% endif %}

                <!-- 公共内容 -->
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="{% url 'about' %}">About</a>
                </li>
                <li class="nav-item sidebar-nav-item">
                    <a class="nav-link js-scroll-trigger" href="mailto:lubaixun@gmail.com">Contact</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

    <!-- 引入 Bootstrap 和自定义 JavaScript -->
    <script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/stylish-portfolio.js' %}"></script>
{% endblock %}

